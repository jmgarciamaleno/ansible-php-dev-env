---
- name: Apt update.
  apt:
    update_cache: yes

- name: Install packages.
  apt:
    name: "{{ item }}"
    state: present
  with_items:
    - curl
    - git
    - vim
    - vim-gnome
    - tree
    - unzip
    - iptables-persistent
    - php5
    - php5-cli
    - php5-dev
    - php5-fpm
    - php5-cgi
    - php5-curl
    - php5-mysql
    - php5-mcrypt
    - php-pear
    - mysql-client

# For some reason it doesnÂ´t get enabled after installation.
- name: Enable php5-mcrypt.
  command: php5enmod mcrypt
  notify: Restart web server.

- name: Install symfony.
  get_url:
    url: "http://symfony.com/installer"
    dest: /usr/local/bin/symfony
    mode: 0755
    force: no
  ignore_errors: yes

- name: Install composer.
  get_url:
    url: "https://getcomposer.org/composer.phar"
    dest: /usr/local/bin/composer
    mode: 0755
    force: no
  ignore_errors: yes
